<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Creating a Lapis Application with MoonScript - Lapis Reference Manual</title>
  <link rel="stylesheet" href="../reference.css?Mon Jan  9 21:25:16 2023" />
  <script type="text/javascript">
  if (window.location.hostname != "localhost") {
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-136625-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  }
</script>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
</head>
<body>
  <div class="header">
    <button class="toggle_nav_btn" id="menu_toggle">Menu</button>
    <h1>
      <a href="..">Lapis</a>
    </h1>
    <div id="search_drop" data-root=".." data-index="../reference.json"></div>
    <a href="../changelog.html" class="version_flag">
      v1.12.0
    </a>
  </div>

  <div class="columns">
    <div class="nav_column">
      <div class="scrolling_inner">
        <div class="lang_picker">
          <span class="lang_toggle active" data-lang="lua">Lua</span>
          <span class="lang_toggle" data-lang="moonscript">MoonScript</span>
        </div>

        
          <div class="nav_links">
            <h2>Creating a Lapis Application with MoonScript</h2>
            <ul><li><a href="#creating-a-basic-application">Creating a Basic Application</a></li>
<li><a href="#lapis-applications">Lapis Applications</a></li>
<li><a href="#moonscript-tips">MoonScript Tips</a></li>
<ul><li><a href="#moonscript-tips/actions">Actions</a></li>
<li><a href="#moonscript-tips/sub-applications">Sub-Applications</a></li>
<ul><li><a href="#moonscript-tips/sub-applications/includeother-application-opts"><code>@include(other_application, [opts])</code></a></li></ul></ul></ul>
          </div>
        

        <div class="nav_links">
          <h2>All Guides</h2>

<ul>
<li><a href="../reference/getting_started.html">Getting Started</a>

<ul>
<li><a href="../reference/lua_getting_started.html">Getting Started With Lua</a></li>
<li><a href="../reference/moon_getting_started.html">Getting Started With MoonScript</a></li>
</ul>
</li>
<li><a href="../reference/actions.html">Requests and Actions</a></li>
<li><a href="../reference/configuration.html">Writing Configurations</a>

<ul>
<li><a href="../reference/lua_creating_configurations.html">Lua configuration syntax</a></li>
<li><a href="../reference/moon_creating_configurations.html">MoonScript configuration syntax</a></li>
</ul>
</li>
<li><a href="../reference/database.html">Database Access, and Queries</a>

<ul>
<li><a href="../reference/models.html">Models</a></li>
</ul>
</li>
<li><a href="../reference/exception_handling.html">Handling Exceptions</a></li>
<li><a href="../reference/input_validation.html">Input Validation</a></li>
<li><a href="../reference/html_generation.html">HTML Generation</a></li>
<li><a href="../reference/etlua_templates.html">etlua Templates</a></li>
<li><a href="../reference/testing.html">Testing</a></li>
<li><a href="../reference/utilities.html">Utility Functions</a></li>
<li><a href="../reference/command_line.html">Command Line Tool</a></li>
<li><a href="../reference/lapis_console.html">Lapis Console</a></li>
</ul>


        </div>

      </div>
    </div>

    <div class="nav_offset">
      <div class="text_column"><div class="override_lang" data-lang="moonscript"></div>


<h1>Creating a Lapis Application with MoonScript</h1>

<h2><a name="creating-a-basic-application" href="#creating-a-basic-application">Creating a Basic Application</a></h2>

<p>You can start a new MoonScript project in the current directory by running the
following command:</p>

<pre class="highlight lang_bash"><code><span class="sh_default">$</span><span class="sh_bash_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_bash_whitespace sh_whitespace"> </span><span class="sh_identifier">new</span><span class="sh_bash_whitespace sh_whitespace"> </span><span class="sh_operator">--</span><span class="sh_identifier">moonscript</span></code>
</pre>


<p>This provides us with a default Nginx configuration, <code>nginx.conf</code>, and a
skeleton application, <code>app.moon</code>. The skeleton application looks like this:</p>

<pre class="highlight lang_moon"><code><span class="sh_comment">-- app.moon</span><span class="sh_moonscript_whitespace sh_whitespace">
</span><span class="sh_identifier">lapis</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_function">require</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;lapis&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

</span><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_string">&quot;/&quot;</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_string">&quot;Welcome to Lapis #{require &quot;</span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_identifier">version</span><span class="sh_string">&quot;}!&quot;</span></code>
</pre>


<p>This defines a regular Lua module that returns our application class. (Implicit
return in MoonScript states that the last statement in a block of code is the
return value.)</p>

<blockquote><p>Don&rsquo;t forget to compile the <code>.moon</code> files when changing and creating them.
You can watch the current directory and compile automatically with <code>moonc
-w</code> but be aware new files arenâ€™t picked up, you have to restart <code>moonc</code>.</p></blockquote>

<p>Try it out by starting the server:</p>

<pre class="highlight lang_bash"><code><span class="sh_identifier">lapis</span><span class="sh_bash_whitespace sh_whitespace"> </span><span class="sh_identifier">server</span></code>
</pre>


<p>If you've compiled the <code>.moon</code> file then <a href="http://localhost:8080">http://localhost:8080</a> will display
the page.</p>

<h2><a name="lapis-applications" href="#lapis-applications">Lapis Applications</a></h2>

<p>When we refer to a Lapis application we are talking about a class that extends
from <code>lapis.Application</code>. The properties of the application make up the routes
the application can serve and the actions it will perform.</p>

<p>Here&rsquo;s a slightly more complicated example to give you a feel of what they look
like:</p>

<pre class="highlight lang_moon"><code><span class="sh_identifier">lapis</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_function">require</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;lapis&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

</span><span class="sh_identifier">favorite_foods</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_symbol sh_embedded">{</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_string">&quot;pizza&quot;</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;Wow pizza is the best! Definitely my favorite&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_string">&quot;egg&quot;</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;A classic breakfast, never leave home without&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_string">&quot;ice cream&quot;</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;Can&#x27;t have a food list without a dessert&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">
</span><span class="sh_symbol sh_embedded">}</span><span class="sh_moonscript_whitespace sh_whitespace">

</span><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_proper_ident sh_class">App</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_symbol sh_embedded">[</span><span class="sh_tbl_key sh_regex">index:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/&quot;</span><span class="sh_symbol sh_embedded">]</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_comment">-- Render HTML inline for simplicity</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_self_ref sh_label">@html</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">-&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_identifier">h1</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;My homepage&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_identifier">a</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">href:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_self_ref sh_label">@url_for</span><span class="sh_symbol sh_embedded">(</span><span class="sh_string">&quot;list_foods&quot;</span><span class="sh_symbol sh_embedded">)</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;Check out my favorite foods&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

  </span><span class="sh_symbol sh_embedded">[</span><span class="sh_tbl_key sh_regex">list_foods:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/foods&quot;</span><span class="sh_symbol sh_embedded">]</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_self_ref sh_label">@html</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">-&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_identifier">ul</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">-&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
        </span><span class="sh_keyword">for</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">food</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">in</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_function">pairs</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">favorite_foods</span><span class="sh_moonscript_whitespace sh_whitespace">
          </span><span class="sh_identifier">li</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">-&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
            </span><span class="sh_identifier">a</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">href:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_self_ref sh_label">@url_for</span><span class="sh_symbol sh_embedded">(</span><span class="sh_string">&quot;food&quot;</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">name:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">food</span><span class="sh_symbol sh_embedded">)</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">food</span><span class="sh_moonscript_whitespace sh_whitespace">

  </span><span class="sh_symbol sh_embedded">[</span><span class="sh_tbl_key sh_regex">food:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/food/:name&quot;</span><span class="sh_symbol sh_embedded">]</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_identifier">food_description</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">favorite_foods</span><span class="sh_symbol sh_embedded">[</span><span class="sh_self_ref sh_label">@params</span><span class="sh_operator">.</span><span class="sh_identifier">name</span><span class="sh_symbol sh_embedded">]</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_keyword">unless</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">food_description</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_keyword">return</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;Not found&quot;</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">status:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_number">404</span><span class="sh_moonscript_whitespace sh_whitespace">

    </span><span class="sh_self_ref sh_label">@html</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">-&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_identifier">h1</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_self_ref sh_label">@params</span><span class="sh_operator">.</span><span class="sh_identifier">name</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_identifier">h2</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;My thoughts on this food&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_library sh_type">p</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">food_description</span></code>
</pre>


<p>You can learn about each of the components used in this example on the
<a href="../reference/actions.html">Requests and Actions guide</a>.</p>

<h2><a name="moonscript-tips" href="#moonscript-tips">MoonScript Tips</a></h2>

<p>Lapis is a bi-language library. It works for either MoonScript or Lua. The rest
of this page will have information specific to the MoonScript interface.
It might be more helpful to check out the <a href="../reference/actions.html">Requests and Actions guide</a> first
to learn more about the basics before reading this section.</p>

<h3><a name="moonscript-tips/actions" href="#moonscript-tips/actions">Actions</a></h3>

<p>The members of the application class make up the patterns that can be matched
by incoming requests. This is referred to as the route and the action, where
the route is the pattern and the action is the function that handles the
matching route:</p>

<pre class="highlight lang_moon"><code><span class="sh_identifier">lapis</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_function">require</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;lapis&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

</span><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_proper_ident sh_class">App</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_string">&quot;/hello&quot;</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;Hello World!&quot;</span></code>
</pre>


<p>In this example, the route <code>"/hello"</code> is matched to a function that
returns <code>"Hello World!"</code></p>

<p>The action is the function called in response to a route matching the path of a
request. Actions are written with the fat arrow, <code>=&gt;</code>, because they all receive
a first argument from Lapis. You might think that <code>self</code> is an instance of
application. It&rsquo;s actually an instance of <code>Request</code>, a class that&rsquo;s used to
represent the current request.</p>

<p>We can also access the instance of the application with <code>@app</code>. You should
treat <code>@app</code> as read only because the instance is shared among many requests.</p>

<p>The members of the class that you want to be routes must start with <code>"/"</code>,
otherwise they are treated as regular methods of the application class.</p>

<h3><a name="moonscript-tips/sub-applications" href="#moonscript-tips/sub-applications">Sub-Applications</a></h3>

<p>As your application becomes more complex it helps to break it apart into
multiple sub-applications. Lapis doesn&rsquo;t place any rules on how you divide your
application, instead it gives you tools to organize your own way.</p>

<h4><a name="moonscript-tips/sub-applications/includeother-application-opts" href="#moonscript-tips/sub-applications/includeother-application-opts"><code>@include(other_application, [opts])</code></a></h4>

<p>Let&rsquo;s say we've got a separate application for handling users:</p>

<pre class="highlight lang_moon"><code><span class="sh_comment">-- applications/users.moon</span><span class="sh_moonscript_whitespace sh_whitespace">
</span><span class="sh_identifier">lapis</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_function">require</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;lapis&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

</span><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_proper_ident sh_class">UsersApplication</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_symbol sh_embedded">[</span><span class="sh_tbl_key sh_regex">login:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/login&quot;</span><span class="sh_symbol sh_embedded">]</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">do_login</span><span class="sh_operator">!</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_symbol sh_embedded">[</span><span class="sh_tbl_key sh_regex">logout:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/logout&quot;</span><span class="sh_symbol sh_embedded">]</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">do_logout</span><span class="sh_operator">!</span></code>
</pre>


<p>We can include this application into our main one:</p>

<pre class="highlight lang_moon"><code><span class="sh_comment">-- app.moon</span><span class="sh_moonscript_whitespace sh_whitespace">
</span><span class="sh_identifier">lapis</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_operator">=</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_function">require</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;lapis&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

</span><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_self_ref sh_label">@include</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;applications.users&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

  </span><span class="sh_symbol sh_embedded">[</span><span class="sh_tbl_key sh_regex">index:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/&quot;</span><span class="sh_symbol sh_embedded">]</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_self_ref sh_label">@html</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">-&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
      </span><span class="sh_identifier">a</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">href:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_self_ref sh_label">@url_for</span><span class="sh_symbol sh_embedded">(</span><span class="sh_string">&quot;login&quot;</span><span class="sh_symbol sh_embedded">)</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;Log in&quot;</span></code>
</pre>


<p>In this example <code>applications/users.moon</code> is a module that returns the
sub-application. The <code>include</code> class method is used to load this application
into our root one. <code>include</code> copies all the routes of the other application,
leaving the original untouched.</p>

<p>Sub-applications are allowed to have before filters, and the before filters
will only apply to all actions enclosed by the application.</p>

<p>A sub-application supports special <code>path</code> and <code>name</code> class values:</p>

<ul>
<li><code>path</code> &mdash; The patterns of the routes copied are prefixed with <code>path</code></li>
<li><code>name</code> &mdash; The names of all the routes copied are prefixed with <code>name</code></li>
</ul>


<pre class="highlight lang_moon"><code><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_proper_ident sh_class">UsersApplication</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_self_ref sh_label">@path</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/users&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_self_ref sh_label">@name</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;user_&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

  </span><span class="sh_comment">-- etc...</span></code>
</pre>


<p><code>include</code> takes an optional second argument, a table of options. The options
can be used to provide or override the <code>path</code> and <code>name</code> values that might have
been set in the application.</p>

<p>For example, we might prefix <code>UsersApplication</code> like so:</p>

<pre class="highlight lang_moon"><code><span class="sh_keyword">class</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_keyword">extends</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_identifier">lapis</span><span class="sh_operator">.</span><span class="sh_proper_ident sh_class">Application</span><span class="sh_moonscript_whitespace sh_whitespace">
  </span><span class="sh_self_ref sh_label">@include</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;applications.users&quot;</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">path:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;/users&quot;</span><span class="sh_operator">,</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_tbl_key sh_regex">name:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_string">&quot;user_&quot;</span><span class="sh_moonscript_whitespace sh_whitespace">

  </span><span class="sh_string">&quot;/&quot;</span><span class="sh_operator">:</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_fndef sh_preprocessor">=&gt;</span><span class="sh_moonscript_whitespace sh_whitespace">
    </span><span class="sh_self_ref sh_label">@url_for</span><span class="sh_symbol sh_embedded">(</span><span class="sh_string">&quot;user_login&quot;</span><span class="sh_symbol sh_embedded">)</span><span class="sh_moonscript_whitespace sh_whitespace"> </span><span class="sh_comment">-- returns &quot;/users/login&quot;</span></code>
</pre>


      </div>
    </div>

  </div>

  <script src="../lib/jquery.min.js"></script>
  <script src="../lib/react.production.min.js"></script>
  <script src="../lib/react-dom.production.min.js"></script>
  <script src="../lib/react-dom-factories.js"></script>
  <script src="../lib/lunr.min.js"></script>
  <script type="text/javascript" src="../search.js?Mon Jan  9 21:25:16 2023"></script>
  <script type="text/javascript" src="../reference.js?Mon Jan  9 21:25:16 2023"></script>
  <script type="text/javascript">
    new L.Reference();
  </script>
</body>
</html>
